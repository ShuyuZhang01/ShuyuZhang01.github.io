<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Works · Shuyu Zhang</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Savate:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

  <!-- Global stylesheet -->
  <link rel="stylesheet" href="style.css">

  <!-- Inline tweaks for Works page -->
  <style>
    /* -------------- Works grid -------------- */
    .works-page .work-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(500px,1fr));
      gap:5rem 4rem;
    }
    /* -------------- Card overlay -------------- */
    .work-card .overlay{
      font-weight:600;line-height:1.35;white-space:normal;
      pointer-events:none;flex-direction:column;
    }
    .work-card .overlay small{
      display:block;font-size:.8rem;font-weight:400;margin-top:.25rem;opacity:.85;
    }
    /* -------------- Modal -------------- */
    .modal-overlay{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,.6);z-index:999}
    .hidden{display:none}
    .modal{
      width:96%;max-width:1100px;max-height:93vh;overflow-y:auto;
      background:#111;color:#eee;padding:36px 36px 48px;border-radius:20px;position:relative;
    }
    .modal .close{position:absolute;top:22px;right:26px;font-size:34px;background:none;border:none;color:#ddd;cursor:pointer;z-index:10}
    .modal .close:hover{color:#fff}
    .videoWrap{position:relative;width:100%;padding-top:56.25%}
    .videoWrap iframe{position:absolute;inset:0;width:100%;height:100%}
    .intro{margin:30px 0;line-height:1.65;font-size:1rem}
    .photos{display:grid;gap:16px;grid-template-columns:repeat(auto-fill,minmax(47%,1fr))}
    .photos img{width:100%;height:auto;border-radius:10px}
  </style>
</head>
<body class="page-dark works-page">

  <!-- ===== Navbar ===== -->
  <nav class="nav">
    <div class="nav-inner container">
      <a href="index.html" class="brand">SHUYU&nbsp;ZHANG</a>
      <ul class="nav-list">
        <li><a href="about.html">About</a></li>
        <li><a href="works.html">Works</a></li>
        <li><a href="practice.html">Self&nbsp;Practice</a></li>
        <li><a href="cv.html">CV</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>
  </nav>

  <!-- ===== Works Section ===== -->
  <main class="container">
    <h1 class="page-title">Works</h1>
    <div class="work-grid">

      <!-- Card: Yu -->
      <article id="yu" class="work-card" data-sign="1" data-project="yu">
        <img class="work-cover" src="assets/photo/dancer15.jpg" alt="Hiphop dancer Yu">
        <div class="overlay">Hiphop dancer Yu<small>installation performance &amp; game · 2024</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

      <!-- Card: Dream -->
      <article id="Dream" class="work-card" data-sign="-1" data-project="dream">
        <img class="work-cover" src="assets/photo/dream (4).png" alt="Redemption">
        <div class="overlay">Redemption<small>Moving image · 2023</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

      <!-- Card: Mocap -->
      <article id="mocap" class="work-card" data-sign="1" data-project="mocap">
        <img class="work-cover" src="assets/photo/mocap.jpg" alt="Dancing in here and there">
        <div class="overlay">Dancing in here and there<small>MotionCapture & Unity VR · 2025</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

      <!-- Card: Flower -->
      <article id="flower" class="work-card" data-sign="-1" data-project="flower">
        <img class="work-cover" src="assets/photo/flower (5).jpg" alt="Piano Piece of Day and Night">
        <div class="overlay">Piano Piece of Day and Night<small>JavaScript · 2024</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

      <!-- Card: Water -->
      <article id="water" class="work-card" data-sign="-1" data-project="water">
        <img class="work-cover" src="assets/photo/water (7).jpg" alt="Can you please give me some water...">
        <div class="overlay">Can you please give me some water...<small>Arduino Installation · 2024</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

      <!-- Card: City -->
      <article id="city" class="work-card" data-sign="1" data-project="ai">
        <img class="work-cover" src="assets/photo/city (8).jpg" alt="CXC sleepless city">
        <div class="overlay">CXC sleepless city<small>360-degree photography · 2021</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

    </div>
  </main>

  <!-- ===== Modal (empty; JS fills) ===== -->
  <div id="modalOverlay" class="modal-overlay hidden" role="dialog" aria-modal="true">
    <div class="modal">
      <button id="closeModal" class="close" aria-label="Close">&times;</button>
      <div class="videoWrap"></div>
      <p class="intro"></p>
      <div class="photos"></div>
    </div>
  </div>

  <!-- ===== Scripts ===== -->
  <script>
  /* ===== 项目数据 ===== */
  const projectData = {
    yu: {
      videoId: 'fQroMDVXbRU',
      intro: `Centered around the author-artist's favorite game <strong>Don't Starve Together</strong>, this work blends her coming-of-age story with the realities of China's street-dance scene …`,
      photos: [
        'dancer.png','dancer (2).png','dancer (3).png','dancer (4).png',
        'dancer (5).png','dancer (6).png','dancer (7).png','dancer (8).png',
        'dancer (9).png','dancer (10).png','dancer (11).png','dancer (12).png',
        'dancer13.jpg','dancer14.jpg','dancer15.jpg'
      ]
    },
    dream: {
      videoId: '2m7fuvJwC5M',
      intro: `Redemption is a moving-image work born of the artist's own brush with death …`,
      photos: ['dream (2).png','dream.png','dream (3).png','dream6.jpg','dream7.jpg','dream8.jpg','dream9.jpg']
    },
    mocap: {
      videoId: '4ZLSETJkSJ8',
      intro : 'Have you ever tried dancing at the same moment with both your past self and your present self …',
      photos: ['mocap.jpg','mocap (2).jpg','mocap (3).jpg','mocap (4).jpg','mocap (5).jpg','mocap (6).jpg','mocap (7).jpg']
    },
    flower: {
      platform: 'vimeo',
      videoId : '1046253775',
      intro   : 'Using pure JavaScript, the piece simulates the sun-flower diurnal rhythm …',
      photos  : ['flower.jpg','flower (2).jpg','flower (3).jpg','flower (4).jpg']
    },
    water: {
      platform: 'vimeo',
      videoId : '1037983368',
      intro   : `This project explores the concept of post-humanism by examining relationships between humans and non-human entities such as plants and water. It challenges anthropocentric perspectives by creating an interactive installation …`,
      photos  : ['water (2).jpg','water (3).jpg','water.jpg','water (4).jpg','water (5).jpg','water (6).jpg']
    },
    ai: {                            /* 最后一张卡片：只放大图 */
      heroImage: 'city (8).jpg',     /* 16:9 主图 */
      videoId  : '',
      intro    : `From the lens of speculative design, we start with a near-future premise: if global sea levels keep climbing until an entire city is swallowed by water, what new form will it assume? …`,
      photos   : ['city (2).jpg','city (4).jpg','city (3).jpg','city (5).jpg','city (6).jpg','city (7).jpg','city (8).jpg','city.jpg']
    }
  };

  /* ===== YouTube API ===== */
  let player;
  function loadYouTubeAPI () {
    if (window.YT) return;
    const tag = document.createElement('script');
    tag.src = 'https://www.youtube.com/iframe_api';
    document.head.appendChild(tag);
  }
  function onYouTubeIframeAPIReady () { /* player 创建由 openModal 触发 */ }

  /* ===== Modal Logic ===== */
  function openModal (projectId) {
    const data = projectData[projectId];
    if (!data) return console.warn('Missing projectData:', projectId);

    const { videoId, intro, photos } = data;
    const modal    = document.getElementById('modalOverlay');
    const videoBox = modal.querySelector('.videoWrap');
    const introBox = modal.querySelector('.intro');
    const photoBox = modal.querySelector('.photos');

    /* --- media (hero img / video) --- */
    let mediaHTML = '';
    if (data.heroImage) {                       /* 仅图片 */
      mediaHTML = `<img src="assets/photo/${data.heroImage}"
                         alt="${projectId} main visual"
                         style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover">`;
    } else if (data.platform === 'vimeo' && videoId) {
      mediaHTML = `<iframe src="https://player.vimeo.com/video/${videoId}?autoplay=1&title=0&byline=0&portrait=0"
                           frameborder="0"
                           allow="autoplay; fullscreen; picture-in-picture"
                           allowfullscreen></iframe>`;
    } else if (videoId) {                       /* 默认 YouTube */
      mediaHTML = `<iframe id="youtubeVideo"
                           src="https://www.youtube.com/embed/${videoId}?enablejsapi=1&autoplay=1"
                           allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                           allowfullscreen></iframe>`;
    }
    videoBox.innerHTML = mediaHTML;

    /* --- intro & gallery --- */
    introBox.innerHTML = intro;
    photoBox.innerHTML = photos.map(f =>
      `<img src="assets/photo/${f}" alt="${f}" class="gallery-img" loading="lazy">`
    ).join('');

    /* --- show modal --- */
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';

    /* --- create YouTube player if needed --- */
    if (!data.heroImage && videoId) {
      if (window.YT && !player) {
        player = new YT.Player('youtubeVideo');
      } else if (!window.YT) {
        loadYouTubeAPI();
      }
    }
  }
  function closeModal () {
    const modal = document.getElementById('modalOverlay');
    modal.classList.add('hidden');
    document.body.style.overflow = '';
    modal.querySelector('.videoWrap').innerHTML = '';
    if (player) { player.destroy(); player = null; }
  }

  /* ===== Anim & Bindings ===== */
  (() => {
    const cards = document.querySelectorAll('.work-card');
    const modalOverlay = document.getElementById('modalOverlay');
    const closeBtn = document.getElementById('closeModal');

    /* fade-in on scroll */
    const reveal = el => el.classList.add('in-view');
    if ('IntersectionObserver' in window) {
      const io = new IntersectionObserver(es => {
        es.forEach(e => { if (e.isIntersecting){ reveal(e.target); io.unobserve(e.target);} });
      },{threshold:.3});
      cards.forEach(c=>io.observe(c));
    } else { cards.forEach(reveal); }

    /* parallax */
    function updateParallax(){
      const vh = innerHeight;
      document.querySelectorAll('.work-card.in-view:not(.expanded)').forEach(card=>{
        const rect = card.getBoundingClientRect();
        const percent = (rect.top + rect.height/2)/vh;
        const sign = parseInt(card.dataset.sign,10)||1;
        card.style.setProperty('--parallax',((percent-.5)*80*sign).toFixed(1)+'px');
      });
    }
    addEventListener('scroll',updateParallax,{passive:true});
    addEventListener('resize',updateParallax);
    addEventListener('load', updateParallax);

    /* click card */
    cards.forEach(card=>card.addEventListener('click',()=>{
      const pid = card.dataset.project;
      if(pid) openModal(pid);
    }));

    /* close */
    closeBtn.addEventListener('click',closeModal);
    modalOverlay.addEventListener('click',e=>{ if(e.target===modalOverlay) closeModal(); });
    document.addEventListener('keydown',e=>{ if(e.key==='Escape'&&!modalOverlay.classList.contains('hidden')) closeModal(); });

    /* preload YouTube */
    loadYouTubeAPI();
  })();
  </script>

</body>
</html>
