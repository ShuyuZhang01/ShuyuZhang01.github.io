<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Works · Shuyu Zhang</title>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Savate:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <!-- Styles -->
  <link rel="stylesheet" href="style.css">
</head>

<body class="page-dark works-page">
  <!-- ===== Navbar ===== -->
  <nav class="nav">
    <div class="nav-inner container">
      <a href="index.html" class="brand">SHUYU&nbsp;ZHANG</a>
      <ul class="nav-list">
        <li><a href="about.html">About</a></li>
        <li><a href="works.html">Works</a></li>
        <li><a href="practice.html">Self&nbsp;Practice</a></li>
        <li><a href="cv.html">CV</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>
  </nav>
  <!-- ===== Works Section ===== -->
  <main class="container">
    <h1 class="page-title">Works</h1>
    <div class="work-grid">
      <!-- 卡片 1 -->
      <article class="work-card" data-sign="1" data-full="Echoes of Ice – 一个结合冰块融化声音采样与摄影打印的沉浸装置">
        <img class="work-cover" src="assets/img/works/ice.jpg" alt="Echoes of Ice">
        <div class="overlay">Echoes of Ice<br><small>摄影 + 声音互动装置 · 2024</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>
      <!-- 卡片 2 -->
      <article class="work-card" data-sign="-1" data-full="RGB Mycelium – 利用霓虹光生长菌丝的可视化实验">
        <img class="work-cover" src="assets/img/works/mycelium.jpg" alt="RGB Mycelium">
        <div class="overlay">RGB Mycelium<br><small>3D 打印与生物材质 · 2024</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>
      <!-- 卡片 3 -->
      <article class="work-card" data-sign="1" data-full="Digital Bloom – 一个结合算法动画与植物视觉语言的影像作品">
        <img class="work-cover" src="assets/img/works/digitalbloom.jpg" alt="Digital Bloom">
        <div class="overlay">Digital Bloom<br><small>生成艺术 · 2023</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>
      <!-- 卡片 4 -->
      <article class="work-card" data-sign="-1" data-full="Liquid Memory – 用水墨溶解效果表达记忆碎片的实验短片">
        <img class="work-cover" src="assets/img/works/liquidmemory.jpg" alt="Liquid Memory">
        <div class="overlay">Liquid Memory<br><small>影像装置 · 2024</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>
      <!-- 卡片 5 -->
      <article class="work-card" data-sign="1" data-full="Mechanical Garden – 一个由小型机械臂驱动的互动花园">
        <img class="work-cover" src="assets/img/works/mechanicalgarden.jpg" alt="Mechanical Garden">
        <div class="overlay">Mechanical Garden<br><small>机械交互 · 2023</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>
      <!-- 卡片 6 -->
      <article class="work-card" data-sign="-1" data-full="Whispers of Code – 利用编程语言生成诗意文字与图形的项目">
        <img class="work-cover" src="assets/img/works/whispers.jpg" alt="Whispers of Code">
        <div class="overlay">Whispers of Code<br><small>代码诗学 · 2024</small></div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>
    </div>
  </main>
  <!-- ===== Works Interaction Script ===== -->
  <script>
    // Intersection Observer for scroll animations
    const io = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add('in-view');
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.3 });
    document.querySelectorAll('.work-card').forEach(c => io.observe(c));

    // Parallax effect on scroll
    function updateParallax() {
      const vh = innerHeight;
      document.querySelectorAll('.work-card.in-view:not(.expanded)').forEach(card => {
        const rect = card.getBoundingClientRect();
        const p = (rect.top + rect.height * 0.5) / vh;
        const sign = parseInt(card.dataset.sign) || 1;
        const t = (p - 0.5) * 80 * sign;
        card.style.setProperty('--parallax', t.toFixed(1) + 'px');
      });
    }
    addEventListener('scroll', updateParallax, { passive: true });
    addEventListener('load', updateParallax);
    addEventListener('resize', updateParallax);

    // Card expansion functionality
    document.querySelectorAll('.work-card').forEach(card => {
      const overlay = card.querySelector('.overlay');
      const close = card.querySelector('.close-btn');
      const fullTxt = card.dataset.full;
      const short = overlay.innerHTML;
      const sign = parseInt(card.dataset.sign) || 1;

      card.addEventListener('click', () => {
        if (card.classList.contains('expanded')) return;
        // Store original position for animation
        const rect = card.getBoundingClientRect();
        card.style.setProperty('--original-top', `${rect.top}px`);
        card.style.setProperty('--original-left', `${rect.left}px`);
        card.style.setProperty('--original-width', `${rect.width}px`);
        card.style.setProperty('--original-height', `${rect.height}px`);
        card.classList.add('expanded');
        if (sign === 1) {
          card.classList.add('expanded-left');
        } else {
          card.classList.add('expanded-right');
        }
        overlay.innerHTML = fullTxt;
        document.body.style.overflow = 'hidden';
      });

      close.addEventListener('click', e => {
        e.stopPropagation();
        card.classList.remove('expanded', 'expanded-left', 'expanded-right');
        overlay.innerHTML = short;
        document.body.style.overflow = 'auto';
      });
    });

    // Close expanded card when clicking outside
    document.addEventListener('click', function(e) {
      const expandedCard = document.querySelector('.work-card.expanded');
      if (expandedCard && !expandedCard.contains(e.target)) {
        const overlay = expandedCard.querySelector('.overlay');
        const short = expandedCard.dataset.short || '';
        expandedCard.classList.remove('expanded', 'expanded-left', 'expanded-right');
        overlay.innerHTML = short;
        document.body.style.overflow = 'auto';
      }
    });
  </script>
</body>
</html>
