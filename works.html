<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Works · Shuyu Zhang</title>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Savate:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <!-- Styles -->
  <link rel="stylesheet" href="style.css">
  <style>
    /* 保留你原来为了测试动画而写的列宽覆盖 */
    .works-page .work-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 5rem 4rem;
    }

    /* ============ Modal 样式 ============ */
    .overlay{
      position:fixed;inset:0;
      display:flex;justify-content:center;align-items:center;
      background:rgba(0,0,0,.6);z-index:999;
    }
    .hidden{display:none}
    .modal{
      width:90%;max-width:600px;max-height:90vh;overflow-y:auto;
      background:#111;color:#eee;padding:24px;border-radius:16px;position:relative;
    }
    .modal .close{
      position:absolute;top:12px;right:16px;font-size:28px;
      background:none;border:none;color:#bbb;cursor:pointer;
    }
    .modal .close:hover{color:#fff}
    .videoWrap{position:relative;width:100%;padding-top:56.25%}
    .videoWrap iframe{position:absolute;inset:0;width:100%;height:100%}
    .intro{margin:24px 0;line-height:1.6}
    .photos{display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(45%,1fr))}
    .photos img{width:100%;height:160px;object-fit:cover;border-radius:8px}
  </style>
</head>

<body class="page-dark works-page">
  <!-- ===== Navbar ===== -->
  <nav class="nav">
    <div class="nav-inner container">
      <a href="index.html" class="brand">SHUYU&nbsp;ZHANG</a>
      <ul class="nav-list">
        <li><a href="about.html">About</a></li>
        <li><a href="works.html">Works</a></li>
        <li><a href="practice.html">Self&nbsp;Practice</a></li>
        <li><a href="cv.html">CV</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>
  </nav>
  <!-- ===== Works Section ===== -->
  <main class="container">
    <h1 class="page-title">Works</h1>
    <div class="work-grid">

      <!-- 卡片 1：Hiphop dancer Yu -->
      <article id="yu" class="work-card" data-sign="1">
        <img class="work-cover" src="assets/photo/dancer(15).jpg" alt="Hiphop dancer Yu">
        <div class="overlay">
          Hiphop dancer Yu<br><small>installation performance and game · 2024</small>
        </div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

      <!-- 卡片 2：flower day and night -->
      <article id="flower" class="work-card" data-sign="-1">
        <img class="work-cover" src="assets/img/works/mycelium.jpg" alt="flower day and night">
        <div class="overlay">
          flower day and night <br><small> JavaScript · 2024</small>
        </div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

      <!-- 卡片 3：Motioncapture dancing -->
      <article id="mocap" class="work-card" data-sign="1">
        <img class="work-cover" src="assets/img/works/digitalbloom.jpg" alt="Motioncapture dancin">
        <div class="overlay">
          mocap<br><small>MotionCapture unity VR · 2023</small>
        </div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

      <!-- 卡片 4：Can I have some water -->
      <article id="water" class="work-card" data-sign="-1">
        <img class="work-cover" src="assets/img/works/liquidmemory.jpg" alt="Can I have some water">
        <div class="overlay">
          Liquid Memory<br><small>installation Arduino · 2024</small>
        </div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

      <!-- 卡片 5：dream -->
      <article id="AI" class="work-card" data-sign="1">
        <img class="work-cover" src="assets/img/works/mechanicalgarden.jpg" alt="Mechanical Garden">
        <div class="overlay">
          dream<br><small> Unreal Engine 4 · 2023</small>
        </div>
        <button class="close-btn" aria-label="Close">&times;</button>
      </article>

    </div>
  </main>

  <!-- ===== Modal Overlay for Hiphop dancer Yu ===== -->
  <div id="overlay" class="overlay hidden">
    <div class="modal">
      <button id="closeModal" class="close" aria-label="Close">&times;</button>
      <!-- 1. YouTube 视频 -->
      <div class="videoWrap">
        <iframe src="https://www.youtube.com/embed/fQroMDVXbRU" title="Hiphop dancer Yu" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      </div>

      <!-- 2. 介绍文字 -->
      <p class="intro">
        Centered around the author‑artist’s favorite game <strong>Don’t Starve Together</strong>, this work blends her coming‑of‑age story with the realities of China’s street‑dance scene. It tells the story of a young woman (the artist herself) living in a university dorm, torn between abandoning her passion for dance and the pressures of everyday life. When she is once again tormented by her own mediocrity in dance, the game’s antagonist—Maxwell—appears, promising that entering “the Constant” (the game world) will make her a dance master. Tempted by Maxwell, she enters the Constant full of hope, only to discover it was all a trick: in this world, she is the only one who can dance, making her the dance master by default. In reality, she hasn’t truly become a master, and must now rely on her limited dance skills to survive in the perilous, shadowy world. The project unfolds in two intertwined formats: an installation and live performance—the real world—and a custom game mod—the virtual world. This project marks the artist’s first attempt at exploring the interaction between the virtual and the real, though she was not aware of it at the time. She tried to use the game to connect her real life and the virtual world, which, at that time, was simply a place for her to escape. After all, at least in the virtual world, she could become a dance master.
      </p>

      <!-- 3. 图片容器，JS 会自动注入 <img> -->
      <div class="photos"></div>
    </div>
  </div>

  <!-- ===== Works Interaction + Modal Script ===== -->
  <script>
  /* -----------------------------------------------------------
     1) detailHTML：如果以后还想给其它卡片用旧的展开效果
        —— 这里只保留空对象，不再给 yu 写长文，改用独立弹窗。
  ----------------------------------------------------------- */
  const detailHTML = { flower:"", mocap:"", water:"", AI:"" };

  /* -----------------------------------------------------------
     2) Intersection Observer：保持不变
  ----------------------------------------------------------- */
  const io = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        e.target.classList.add('in-view');
        io.unobserve(e.target);
      }
    });
  }, { threshold: 0.3 });
  document.querySelectorAll('.work-card').forEach(c => io.observe(c));

  /* -----------------------------------------------------------
     3) 视差效果：保持不变
  ----------------------------------------------------------- */
  function updateParallax() {
    const vh = innerHeight;
    document.querySelectorAll('.work-card.in-view:not(.expanded)').forEach(card => {
      const rect = card.getBoundingClientRect();
      const p = (rect.top + rect.height * 0.5) / vh;
      const sign = parseInt(card.dataset.sign) || 1;
      const t = (p - 0.5) * 80 * sign;
      card.style.setProperty('--parallax', t.toFixed(1) + 'px');
    });
  }
  addEventListener('scroll', updateParallax, { passive: true });
  addEventListener('load', updateParallax);
  addEventListener('resize', updateParallax);

  /* -----------------------------------------------------------
     4) 卡片展开逻辑：除 id="yu" 以外保持原功能。
        点击 yu 切换为弹窗，而非旧的卡片放大。
  ----------------------------------------------------------- */
  const overlayModal = document.getElementById('overlay');
  const closeModalBtn = document.getElementById('closeModal');

  document.querySelectorAll('.work-card').forEach(card => {
    if (card.id === 'yu') {
      // 直接弹窗
      card.addEventListener('click', e => {
        e.stopPropagation();
        overlayModal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
      });
    } else {
      // ======= 原来的卡片展开代码 =======
      const overlay = card.querySelector('.overlay');
      const close   = card.querySelector('.close-btn');
      const short   = overlay.innerHTML;
      const fullTxt = card.dataset.full;
      const sign    = parseInt(card.dataset.sign) || 1;

      card.addEventListener('click', () => {
        if (card.classList.contains('expanded')) return;

        const rect = card.getBoundingClientRect();
        card.style.setProperty('--original-top', `${rect.top}px`);
        card.style.setProperty('--original-left', `${rect.left}px`);
        card.style.setProperty('--original-width', `${rect.width}px`);
        card.style.setProperty('--original-height', `${rect.height}px`);

        const longHTML = detailHTML[card.id] || fullTxt || short;
        overlay.innerHTML = longHTML;

        card.classList.add('expanded', sign === 1 ? 'expanded-left' : 'expanded-right');
        document.body.style.overflow = 'hidden';
      });

      // 关闭按钮
      close.addEventListener('click', e => {
        e.stopPropagation();
        collapse();
      });

      // 点空白区域关闭
      document.addEventListener('click', e => {
        if (card.classList.contains('expanded') && !card.contains(e.target)) {
          collapse();
        }
      });

      function collapse() {
        card.classList.remove('expanded','expanded-left','expanded-right');
        overlay.innerHTML = short;
        document.body.style.overflow = 'auto';
      }
    }
  });

  // ======= 弹窗关闭按钮 =======
  closeModalBtn.addEventListener('click', () => {
    overlayModal.classList.add('hidden');
    document.body.style.overflow = 'auto';
  });

  /* -----------------------------------------------------------
     5) 动态生成照片 <img>
  ----------------------------------------------------------- */
  const photoFiles = [
    'dancer.png','dancer (2).png','dancer (3).png','dancer (4).png',
    'dancer (5).png','dancer (6).png','dancer (7).png','dancer (8).png',
    'dancer (9).png','dancer (10).png','dancer (11).png','dancer (12).png',
    'dancer (13).jpg','dancer (14).jpg','dancer (15).jpg'
  ];
  const photoBox = document.querySelector('#overlay .photos');
  photoFiles.forEach(name => {
    const img = document.createElement('img');
    img.src = `assets/photo/${name}`;
    img.alt = name;
    photoBox.appendChild(img);
  });
  </script>
</body>
</html>
