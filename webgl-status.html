<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebGLçŠ¶æ€æ£€æŸ¥</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            font-size: 14px;
            line-height: 1.6;
        }
        #status {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            background: rgba(0,0,0,0.9);
            padding: 20px;
            border-radius: 10px;
            max-width: 500px;
            border: 1px solid #333;
        }
        .status-item {
            margin-bottom: 10px;
            padding: 5px 0;
            border-bottom: 1px solid #333;
        }
        .success { color: #4ade80; }
        .error { color: #f87171; }
        .warning { color: #fbbf24; }
        .info { color: #60a5fa; }
        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
    </style>
</head>
<body>
    <div id="status">
        <h3>WebGLçŠ¶æ€æ£€æŸ¥</h3>
        <div id="status-content">æ£€æŸ¥ä¸­...</div>
    </div>

    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <script>
        function addStatus(message, type = 'info') {
            const content = document.getElementById('status-content');
            const div = document.createElement('div');
            div.className = `status-item ${type}`;
            div.innerHTML = message;
            content.appendChild(div);
        }
        
        function checkWebGL() {
            addStatus('ğŸ” å¼€å§‹WebGLæ£€æŸ¥...', 'info');
            
            // æ£€æŸ¥æµè§ˆå™¨ä¿¡æ¯
            addStatus(`ğŸŒ æµè§ˆå™¨: ${navigator.userAgent}`, 'info');
            
            // æ£€æŸ¥WebGLæ”¯æŒ
            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                
                if (!gl) {
                    addStatus('âŒ WebGLä¸æ”¯æŒ', 'error');
                    return false;
                }
                
                addStatus('âœ… WebGLæ”¯æŒ', 'success');
                addStatus(`ğŸ”§ WebGLä¾›åº”å•†: ${gl.getParameter(gl.VENDOR)}`, 'info');
                addStatus(`ğŸ¨ WebGLæ¸²æŸ“å™¨: ${gl.getParameter(gl.RENDERER)}`, 'info');
                addStatus(`ğŸ“‹ WebGLç‰ˆæœ¬: ${gl.getParameter(gl.VERSION)}`, 'info');
                
                return true;
            } catch (e) {
                addStatus(`âŒ WebGLæ£€æŸ¥å¤±è´¥: ${e.message}`, 'error');
                return false;
            }
        }
        
        function checkThreeJS() {
            if (typeof THREE === 'undefined') {
                addStatus('âŒ Three.jsæœªåŠ è½½', 'error');
                return false;
            }
            
            addStatus(`âœ… Three.jså·²åŠ è½½ (ç‰ˆæœ¬: ${THREE.REVISION})`, 'success');
            return true;
        }
        
        function testWebGLScene() {
            addStatus('ğŸ¬ å¼€å§‹åˆ›å»ºWebGLåœºæ™¯...', 'info');
            
            try {
                // åˆ›å»ºåœºæ™¯
                const scene = new THREE.Scene();
                addStatus('âœ… åœºæ™¯åˆ›å»ºæˆåŠŸ', 'success');
                
                // åˆ›å»ºç›¸æœº
                const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                camera.position.z = 5;
                addStatus('âœ… ç›¸æœºåˆ›å»ºæˆåŠŸ', 'success');
                
                // åˆ›å»ºæ¸²æŸ“å™¨
                const renderer = new THREE.WebGLRenderer({ alpha: true });
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setClearColor(0x000000, 0);
                addStatus('âœ… æ¸²æŸ“å™¨åˆ›å»ºæˆåŠŸ', 'success');
                
                // æ·»åŠ åˆ°é¡µé¢
                document.body.appendChild(renderer.domElement);
                addStatus('âœ… Canvaså·²æ·»åŠ åˆ°é¡µé¢', 'success');
                
                // åˆ›å»ºä¸€ä¸ªç®€å•çš„ç«‹æ–¹ä½“
                const geometry = new THREE.BoxGeometry();
                const material = new THREE.MeshBasicMaterial({ color: 0x9ca3af, wireframe: true });
                const cube = new THREE.Mesh(geometry, material);
                scene.add(cube);
                addStatus('âœ… ç«‹æ–¹ä½“åˆ›å»ºæˆåŠŸ', 'success');
                
                // æ¸²æŸ“ä¸€æ¬¡
                renderer.render(scene, camera);
                addStatus('âœ… åœºæ™¯æ¸²æŸ“æˆåŠŸ', 'success');
                
                // å¼€å§‹åŠ¨ç”»
                function animate() {
                    requestAnimationFrame(animate);
                    cube.rotation.x += 0.01;
                    cube.rotation.y += 0.01;
                    renderer.render(scene, camera);
                }
                animate();
                addStatus('âœ… åŠ¨ç”»å¾ªç¯å¯åŠ¨æˆåŠŸ', 'success');
                
                return true;
                
            } catch (error) {
                addStatus(`âŒ WebGLåœºæ™¯åˆ›å»ºå¤±è´¥: ${error.message}`, 'error');
                addStatus(`ğŸ“‹ é”™è¯¯è¯¦æƒ…: ${error.stack}`, 'error');
                return false;
            }
        }
        
        function runAllTests() {
            addStatus('ğŸš€ å¼€å§‹å…¨é¢æ£€æŸ¥...', 'info');
            
            const webglSupported = checkWebGL();
            const threejsLoaded = checkThreeJS();
            
            if (webglSupported && threejsLoaded) {
                setTimeout(() => {
                    testWebGLScene();
                }, 1000);
            } else {
                addStatus('âš ï¸ ç”±äºåŸºç¡€æ£€æŸ¥å¤±è´¥ï¼Œè·³è¿‡åœºæ™¯æµ‹è¯•', 'warning');
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runAllTests, 500);
        });
    </script>
</body>
</html> 